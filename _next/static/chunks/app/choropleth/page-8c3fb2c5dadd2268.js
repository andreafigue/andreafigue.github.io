(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{9046:(e,t,r)=>{Promise.resolve().then(r.bind(r,9728)),Promise.resolve().then(r.bind(r,9727))},9728:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var o=r(5155),n=r(2115),i=r(9990),a=r.n(i),l=r(6087);r(8689),a().accessToken="pk.eyJ1IjoiYW5kcmVhZmlndWUiLCJhIjoiY202MWNpZnprMG85ZzJqb294NWNxdmF1OSJ9.A5YwFIMyxiy9MajWi_uAOw";let s=e=>{let{geojsonData:t,countyCsvData:r}=e,i=(0,n.useRef)(null),s=(0,n.useRef)(null),u=(0,n.useRef)(null),[d,p]=(0,n.useState)(1961),[c,h]=(0,n.useState)(null),[f,y]=(0,n.useState)({x:0,y:0}),[v,m]=(0,n.useState)({});(0,n.useEffect)(()=>{if(r&&r.length>0){let e={};r.forEach(t=>{let r=t.County;e[r]||(e[r]=[]),e[r].push({year:t.Year,population:t.Population,rate:t.rate,source:t.Source})}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>e.year-t.year)});let t={};Object.entries(e).forEach(e=>{let[r,o]=e;t[r]={populations:o.map(e=>({year:e.year,population:e.population})),growthRates:o.reduce((e,t)=>(e[t.year]=t.rate,e),{}),sources:o.reduce((e,t)=>(e[t.year]=t.source,e),{})}}),m(t)}else if(t&&t.features){let e={};t.features.forEach(t=>{var r,o,n;let i=(null===(r=t.properties)||void 0===r?void 0:r.id)||(null===(o=t.properties)||void 0===o?void 0:o.NAME)||(null===(n=t.properties)||void 0===n?void 0:n.county)||Math.random().toString(36).substr(2,9),a={},l=[],s={};for(let e=2e3;e<=2050;e++)a[e]=Math.random(),l.push({year:e,population:Math.floor(1e5*Math.random())}),s[e]="RandomSource";e[i]={growthRates:a,populations:l,sources:s}}),m(e)}},[r,t]),(0,n.useEffect)(()=>{if(!u.current&&i.current)return u.current=new(a()).Map({container:i.current,style:"mapbox://styles/mapbox/light-v10",center:[-120.4472,47.3826],zoom:5.8}),u.current.on("load",()=>{u.current&&(u.current.addSource("counties",{type:"geojson",data:t}),u.current.addLayer({id:"counties-layer",type:"fill",source:"counties",paint:{"fill-color":["interpolate",["linear"],["get","growthRate"],-.08333333333333337,"#f2f0f7",.12195121951219523,"#54278f"],"fill-opacity":.8,"fill-outline-color":"#000"}}),x(),u.current.on("mousemove","counties-layer",e=>{if(e.features&&e.features.length>0){var t,r,o;let n=e.features[0],i=(null===(t=n.properties)||void 0===t?void 0:t.id)||(null===(r=n.properties)||void 0===r?void 0:r.NAME)||(null===(o=n.properties)||void 0===o?void 0:o.county);i&&(h(i),y({x:e.point.x,y:e.point.y}))}}),u.current.on("mouseleave","counties-layer",()=>{h(null)}))}),()=>{u.current&&u.current.remove()}},[t]),(0,n.useEffect)(()=>{u.current&&u.current.getSource("counties")&&x()},[d,v]);let x=()=>{if(!u.current)return;let e=u.current.getSource("counties");if(!e)return;let r={...t,features:t.features.map(e=>{var t,r,o;let n=(null===(t=e.properties)||void 0===t?void 0:t.id)||(null===(r=e.properties)||void 0===r?void 0:r.NAME)||(null===(o=e.properties)||void 0===o?void 0:o.county),i=void 0!==v[n]?v[n].growthRates[d]:0;return e.properties={...e.properties,growthRate:i},e})};e.setData(r)};return(0,n.useEffect)(()=>{if(c&&s.current&&v[c]){let e=v[c].populations,t=l.Ltv(s.current);t.selectAll("*").remove();let r=v[c].growthRates[d]||0,o=v[c].sources[d]||"";t.append("div").style("font-weight","bold").style("margin-bottom","5px").text("County: ".concat(c)),t.append("div").style("margin-bottom","5px").text("Growth Rate: ".concat((100*r).toFixed(2),"% (Source: ").concat(o,")")),t.append("div").style("font-weight","bold").style("margin-bottom","5px").text("Population Growth");let n=t.append("svg").attr("width",200).attr("height",100),i={top:5,right:10,bottom:20,left:60},a=200-i.left-i.right,u=100-i.top-i.bottom,p=n.append("g").attr("transform","translate(".concat(i.left,",").concat(i.top,")")),h=l.m4Y().domain(l.Xxv(e,e=>e.year)).range([0,a]),f=l.m4Y().domain([0,l.T9B(e,e=>e.population)||0]).nice().range([u,0]),y=l.n8j().x(e=>h(e.year)).y(e=>f(e.population));p.append("g").attr("transform","translate(0,".concat(u,")")).call(l.l78(h).ticks(5).tickFormat(l.GPZ("d"))),p.append("g").call(l.V4s(f).ticks(5)),p.append("path").datum(e).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",y)}},[c,v,d]),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)("div",{ref:i,style:{width:"100%",height:"600px"}}),(0,o.jsxs)("div",{style:{position:"absolute",top:10,left:10,background:"white",padding:"10px",zIndex:2},children:[(0,o.jsxs)("label",{htmlFor:"yearSlider",children:["Year: ",d]}),(0,o.jsx)("br",{}),(0,o.jsx)("input",{id:"yearSlider",type:"range",min:"1961",max:"2050",value:d,onChange:e=>p(Number(e.target.value))})]}),c&&(0,o.jsx)("div",{ref:s,style:{position:"absolute",left:f.x+10,top:f.y+10,background:"white",padding:"5px",border:"1px solid #ccc",pointerEvents:"none",zIndex:2,minWidth:"220px"}}),(0,o.jsxs)("div",{style:{position:"absolute",bottom:20,right:20,background:"white",padding:"10px",border:"1px solid #ccc",zIndex:2,width:"220px"},children:[(0,o.jsx)("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"Growth Rate"}),(0,o.jsx)("div",{style:{width:"100%",height:"20px",background:"linear-gradient(to right, #f2f0f7, #54278f)"}}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)("span",{children:"-8.34%"}),(0,o.jsx)("span",{children:"12.2%"})]})]})]})}},9727:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var o=r(5155),n=r(2115);let i=()=>{let e=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(()=>{let t=e.current;if(t){var r;let e=t.contentDocument||(null===(r=t.contentWindow)||void 0===r?void 0:r.document);e&&(e.open(),e.write('\n              <head>\n			    <meta charset="UTF-8" />\n			    <script type="module" crossorigin src="/lib/mapbox-app.js"><\/script>\n			    <link rel="stylesheet" crossorigin href="/lib/mapbox-app.css">\n			  </head>\n			  <body>\n			    <div id="root"></div>\n			  </body>\n          '),e.close())}})()},[]),(0,o.jsx)("div",{style:{width:"100%",height:"800px"},children:(0,o.jsx)("iframe",{ref:e,style:{width:"100%",height:"100%",border:"none"}})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[168,240,623,441,517,358],()=>t(9046)),_N_E=e.O()}]);